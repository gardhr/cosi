[![GitHub license](https://img.shields.io/badge/license-MIT-blue.svg)](https://opensource.org/licenses/MIT)
[![GitHub license](https://img.shields.io/badge/license-ISC-blue.svg)](https://opensource.org/licenses/ISC)

# Cosi (Javascript Native Runtime)

## C API

`cosi cosi_create_from(js_Alloc alloc, void* context, int flags)`

Create a new Cosi instance using a MuJS-compliant allocator and allocator "context" (for most applications these can both be NULL). The flags parameter currently only supports the JS_STRICT flag.

`cosi cosi_create(void)`
 
Creates a new (strict-mode) Cosi instance using the default allocator. 

`cosi cosi_destroy(cosi J)`

Deletes a Cosi instance.

`cosi_bool cosi_extend(cosi J, const char* symbol, void (*code)(cosi))`

Maps a MuJS-compliant custom handler to a new global Javascript function.  

`cosi_bool cosi_define(cosi J, const char* symbol, double value)`

Defines a new global Javascript (Number) variable.

`cosi_bool cosi_declare(cosi J, const char* symbol, void* value)`

Defines a new global Javascript "blob" (C pointer) variable.

`cosi_bool cosi_run(cosi J, const char* script)`

Runs some Javascript code.

`cosi_bool cosi_eval(cosi J, const char* script)`

Evokes the Javascript eval() function "in line".

`cosi_bool cosi_include(cosi J, const char* file)`

Expands the code from "file" directly into the current global space.

`void cosi_main(cosi J, char** argv, char** envp)`

Gives scripts access to argv and envp.

`void cosi_set_global(cosi J)`

Set the global Cosi object. 

`cosi cosi_get_global(void)`

Get the global Cosi object. 
 
`const char* cosi_message(cosi J)`

Returns the error message generated by the last Cosi operation (if any).

`cosi_bool cosi_success(cosi J)`

Returns the result of the last Cosi operation.

## Javascript API

## License

This library is released under [a dual MIT/ISC license](https://raw.githubusercontent.com/gardhr/cosi/master/LICENSE). <img align="right" src="https://opensource.org/trademarks/opensource/OSI-Approved-License-100x137.png">

`Powered by` [MuJS](https://mujs.com) <img align="right" src="https://mujs.com/images/mujs_logo_web.png">
